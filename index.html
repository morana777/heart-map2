<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Love Song & Letter</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial Rounded MT Bold', 'Arial', sans-serif;
        }
        
        body {
            background-color: #ffe6f2;
            color: #660033;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .container {
            max-width: 800px;
            width: 100%;
            background-color: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(255, 105, 180, 0.2);
            padding: 30px;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }
        
        .header h1 {
            color: #ff3385;
            font-size: 2.8rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 0px #ffcce0;
            letter-spacing: 1px;
        }
        
        .header p {
            color: #cc0066;
            font-size: 1.2rem;
            font-style: italic;
        }
        
        .heart-decoration {
            position: absolute;
            color: #ff6699;
            font-size: 1.5rem;
            opacity: 0.7;
        }
        
        .heart-1 { top: 10px; left: 10px; }
        .heart-2 { top: 10px; right: 10px; }
        .heart-3 { bottom: 10px; left: 10px; }
        .heart-4 { bottom: 10px; right: 10px; }
        
        .music-section {
            background-color: #fff0f7;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            border: 2px dashed #ff99cc;
            text-align: center;
        }
        
        .music-title {
            color: #ff3385;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }
        
        .music-player {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }
        
        .song-selector {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .song-selector label {
            font-weight: bold;
            color: #cc0066;
        }
        
        .song-selector select {
            padding: 8px 15px;
            border-radius: 50px;
            border: 2px solid #ff99cc;
            background-color: white;
            color: #cc0066;
            font-weight: bold;
            cursor: pointer;
        }
        
        .open-heart-btn {
            background-color: #ff3385;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 0 #cc0066;
            margin-top: 5px;
        }
        
        .open-heart-btn:hover {
            background-color: #ff0066;
            transform: translateY(-2px);
            box-shadow: 0 6px 0 #cc0066;
        }
        
        .open-heart-btn:active {
            transform: translateY(2px);
            box-shadow: 0 2px 0 #cc0066;
        }
        
        .music-bar {
            width: 100%;
            background-color: #ffd9eb;
            height: 8px;
            border-radius: 10px;
            margin-top: 15px;
            overflow: hidden;
            position: relative;
        }
        
        .music-progress {
            width: 30%;
            height: 100%;
            background-color: #ff3385;
            border-radius: 10px;
            transition: width 0.5s linear;
        }
        
        .music-time {
            display: flex;
            justify-content: space-between;
            width: 100%;
            font-size: 0.9rem;
            color: #99004d;
            margin-top: 5px;
        }
        
        .letter-section {
            background-color: #fff9fc;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            border: 2px solid #ffcce6;
            position: relative;
        }
        
        .letter-title {
            color: #ff3385;
            margin-bottom: 20px;
            font-size: 1.8rem;
            text-align: center;
        }
        
        .letter-content {
            min-height: 300px;
            padding: 20px;
            border-radius: 10px;
            background-color: white;
            border: 2px dashed #ff99cc;
            font-size: 1.1rem;
            line-height: 1.6;
            color: #660033;
            outline: none;
            overflow-y: auto;
            resize: vertical;
        }
        
        .letter-content:focus {
            border: 2px solid #ff3385;
        }
        
        .letter-instruction {
            text-align: center;
            font-style: italic;
            color: #cc6699;
            margin-top: 10px;
            font-size: 0.9rem;
        }
        
        .share-section {
            text-align: center;
            padding: 25px;
            background-color: #fff0f7;
            border-radius: 15px;
            margin-top: 20px;
            border: 2px dashed #ff99cc;
        }
        
        .share-title {
            color: #ff3385;
            margin-bottom: 20px;
            font-size: 1.8rem;
        }
        
        .share-btn {
            background-color: #ff66b3;
            color: white;
            border: none;
            padding: 15px 35px;
            border-radius: 50px;
            font-size: 1.3rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 0 #cc3385;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 0 auto;
        }
        
        .share-btn:hover {
            background-color: #ff3385;
            transform: translateY(-3px);
            box-shadow: 0 8px 0 #cc3385;
        }
        
        .share-btn:active {
            transform: translateY(3px);
            box-shadow: 0 2px 0 #cc3385;
        }
        
        .view-only-notice {
            background-color: #ffebf3;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            border-left: 5px solid #ff3385;
            display: none;
        }
        
        .view-only-notice h3 {
            color: #ff3385;
            margin-bottom: 5px;
        }
        
        .cute-end-btn {
            background-color: #ff99cc;
            color: #660033;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .cute-end-btn:hover {
            background-color: #ff66b3;
            color: white;
            transform: scale(1.05);
        }
        
        .footer {
            text-align: center;
            margin-top: 30px;
            color: #cc6699;
            font-style: italic;
        }
        
        /* View-only mode styles */
        .view-only .letter-content {
            background-color: #fff9fc;
            cursor: default;
            resize: none;
        }
        
        .view-only .song-selector select,
        .view-only .open-heart-btn {
            display: none;
        }
        
        .view-only .music-bar {
            margin-top: 0;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2.2rem;
            }
            
            .letter-content {
                min-height: 250px;
            }
        }
        
        /* Animation for the music bar */
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }
        
        .music-bar.active {
            animation: pulse 1s infinite;
        }
    </style>
</head>
<body>
    <div class="heart-decoration heart-1">‚ù§</div>
    <div class="heart-decoration heart-2">‚ù§</div>
    
    <div class="container" id="mainContainer">
        <div class="header">
            <h1>Our Love Song</h1>
            <p>A musical gift for the one I love</p>
        </div>
        
        <div class="music-section">
            <h2 class="music-title">Choose Our Song</h2>
            <div class="music-player">
                <div class="song-selector">
                    <label for="songSelect">Select a song:</label>
                    <select id="songSelect">
                        <option value="love-song-1">Our Love Song - Original</option>
                        <option value="love-song-2">Can't Help Falling in Love</option>
                        <option value="love-song-3">Perfect by Ed Sheeran</option>
                        <option value="love-song-4">All of Me by John Legend</option>
                        <option value="love-song-5">Thinking Out Loud</option>
                    </select>
                </div>
                
                <button class="open-heart-btn" id="playButton">
                    <i class="fas fa-heart"></i> Open My Heart
                </button>
                
                <div class="music-bar" id="musicBar">
                    <div class="music-progress" id="musicProgress"></div>
                </div>
                <div class="music-time">
                    <span id="currentTime">0:00</span>
                    <span id="totalTime">0:00</span>
                </div>
            </div>
        </div>
        
        <div class="letter-section">
            <h2 class="letter-title">My Love Letter</h2>
            <div class="letter-content" id="letterContent" contenteditable="true">
                My Dearest Love,<br><br>
                
                Every moment with you feels like a beautiful melody that I never want to end. From the first time we met, my heart knew it had found its perfect rhythm in sync with yours.<br><br>
                
                You are the music that plays in my soul on even the quietest days. Your laughter is my favorite song, your smile the sweetest chorus, and your love the most beautiful symphony I've ever known.<br><br>
                
                Today and every day, I choose you. I choose to love you, to cherish you, and to build a lifetime of memories with you. This song is just a small reflection of the love that fills my heart for you.<br><br>
                
                Forever yours,<br>
                [Your Name]
            </div>
            <p class="letter-instruction">Click above to edit this love letter. Make it personal and special!</p>
        </div>
        
        <div class="share-section">
            <h2 class="share-title">Share This Gift</h2>
            <p style="margin-bottom: 20px; color: #660033;">Once you share this gift with your partner, it will become view-only to preserve your special message.</p>
            
            <button class="share-btn" id="shareButton">
                <i class="fas fa-gift"></i> Share This Gift With My Love
            </button>
            
            <div class="view-only-notice" id="viewOnlyNotice">
                <h3>üéÅ Gift Shared Successfully!</h3>
                <p>This page is now in view-only mode to preserve your special message. Your partner can view it but no longer make changes.</p>
            </div>
        </div>
        
        <div class="heart-decoration heart-3">‚ù§</div>
        <div class="heart-decoration heart-4">‚ù§</div>
    </div>
    
    <button class="cute-end-btn" id="cuteEndBtn">
        <i class="fas fa-share-alt"></i> Share Your Made Gift with Friends!
    </button>
    
    <div class="footer">
        Made with <i class="fas fa-heart" style="color:#ff3385;"></i> for you and your special someone
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Get DOM elements
            const playButton = document.getElementById('playButton');
            const musicBar = document.getElementById('musicBar');
            const musicProgress = document.getElementById('musicProgress');
            const currentTimeEl = document.getElementById('currentTime');
            const totalTimeEl = document.getElementById('totalTime');
            const songSelect = document.getElementById('songSelect');
            const letterContent = document.getElementById('letterContent');
            const shareButton = document.getElementById('shareButton');
            const viewOnlyNotice = document.getElementById('viewOnlyNotice');
            const mainContainer = document.getElementById('mainContainer');
            const cuteEndBtn = document.getElementById('cuteEndBtn');
            
            // Music player state
            let isPlaying = false;
            let currentTime = 0;
            let totalTime = 180; // 3 minutes in seconds
            let progressInterval;
            
            // Set total time display
            totalTimeEl.textContent = formatTime(totalTime);
            
            // Play/pause button functionality
            playButton.addEventListener('click', function() {
                isPlaying = !isPlaying;
                
                if (isPlaying) {
                    // Start playing
                    playButton.innerHTML = '<i class="fas fa-pause"></i> Pause My Heart';
                    musicBar.classList.add('active');
                    
                    // Start progress animation
                    progressInterval = setInterval(updateProgress, 1000);
                } else {
                    // Pause
                    playButton.innerHTML = '<i class="fas fa-heart"></i> Open My Heart';
                    musicBar.classList.remove('active');
                    
                    // Stop progress animation
                    clearInterval(progressInterval);
                }
            });
            
            // Update progress bar function
            function updateProgress() {
                if (currentTime < totalTime) {
                    currentTime += 1;
                    const progressPercent = (currentTime / totalTime) * 100;
                    musicProgress.style.width = `${progressPercent}%`;
                    currentTimeEl.textContent = formatTime(currentTime);
                } else {
                    // Song ended
                    isPlaying = false;
                    playButton.innerHTML = '<i class="fas fa-heart"></i> Open My Heart';
                    musicBar.classList.remove('active');
                    clearInterval(progressInterval);
                    currentTime = 0;
                    setTimeout(() => {
                        musicProgress.style.width = '0%';
                        currentTimeEl.textContent = '0:00';
                    }, 500);
                }
            }
            
            // Format time in MM:SS
            function formatTime(seconds) {
                const mins = Math.floor(seconds / 60);
                const secs = Math.floor(seconds % 60);
                return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
            }
            
            // Song selector functionality
            songSelect.addEventListener('change', function() {
                // Reset player when song changes
                isPlaying = false;
                playButton.innerHTML = '<i class="fas fa-heart"></i> Open My Heart';
                musicBar.classList.remove('active');
                clearInterval(progressInterval);
                currentTime = 0;
                musicProgress.style.width = '0%';
                currentTimeEl.textContent = '0:00';
                
                // Change total time based on selection (simulated)
                const songTimes = {
                    'love-song-1': 180,
                    'love-song-2': 166,
                    'love-song-3': 263,
                    'love-song-4': 269,
                    'love-song-5': 281
                };
                
                totalTime = songTimes[this.value] || 180;
                totalTimeEl.textContent = formatTime(totalTime);
            });
            
            // Share button functionality - makes page view-only
            shareButton.addEventListener('click', function() {
                // Show view-only notice
                viewOnlyNotice.style.display = 'block';
                
                // Change the share button text
                shareButton.innerHTML = '<i class="fas fa-check"></i> Gift Shared!';
                shareButton.style.backgroundColor = '#4CAF50';
                shareButton.style.boxShadow = '0 5px 0 #388E3C';
                shareButton.disabled = true;
                
                // Make the page view-only
                mainContainer.classList.add('view-only');
                letterContent.contentEditable = 'false';
                letterContent.classList.add('view-only');
                
                // Show cute end button
                cuteEndBtn.style.display = 'flex';
                
                // Save to localStorage to simulate "sharing"
                const giftData = {
                    song: songSelect.value,
                    songName: songSelect.options[songSelect.selectedIndex].text,
                    letter: letterContent.innerHTML,
                    date: new Date().toISOString(),
                    viewOnly: true
                };
                
                localStorage.setItem('loveGift', JSON.stringify(giftData));
                
                // Show confirmation message
                setTimeout(() => {
                    alert('Your gift has been shared with your partner! The page is now view-only to preserve your special message.');
                }, 500);
            });
            
            // Cute end button functionality
            cuteEndBtn.addEventListener('click', function() {
                alert('Thank you for creating this gift! Share it with friends to spread the love. üíñ');
                
                // In a real implementation, this would open social sharing options
                // For now, we'll simulate sharing
                const shareText = `I just created a beautiful Love Song & Letter gift for my special someone! Create your own at this website.`;
                if (navigator.share) {
                    navigator.share({
                        title: 'My Love Song & Letter Gift',
                        text: shareText,
                        url: window.location.href
                    });
                } else {
                    // Fallback: copy to clipboard
                    navigator.clipboard.writeText(shareText + ' ' + window.location.href)
                        .then(() => alert('Sharing message copied to clipboard!'));
                }
            });
            
            // Check if page is already in view-only mode (simulating a shared gift)
            const savedGift = localStorage.getItem('loveGift');
            if (savedGift) {
                const giftData = JSON.parse(savedGift);
                if (giftData.viewOnly) {
                    // Set the page to view-only mode
                    mainContainer.classList.add('view-only');
                    letterContent.contentEditable = 'false';
                    letterContent.classList.add('view-only');
                    
                    // Update song selection
                    songSelect.value = giftData.song;
                    
                    // Update letter content
                    letterContent.innerHTML = giftData.letter;
                    
                    // Update share button
                    shareButton.innerHTML = '<i class="fas fa-gift"></i> Gift Already Shared';
                    shareButton.style.backgroundColor = '#cccccc';
                    shareButton.style.boxShadow = '0 5px 0 #999999';
                    shareButton.disabled = true;
                    
                    // Show view-only notice
                    viewOnlyNotice.style.display = 'block';
                    
                    // Show cute end button
                    cuteEndBtn.style.display = 'flex';
                }
            }
        });
    </script>
</body>
</html>
